import React from 'react';
import { View } from 'react-native';
import Svg, { Path, Circle, Mask } from 'react-native-svg';
import { COLORS } from '@/constants/colors';

interface CommunityIconProps {
  focused: boolean;
  color: string;
}

export default function CommunityIcon({ focused, color }: CommunityIconProps) {
  return (
    <View style={{ width: 35, height: 30, alignItems: 'center', justifyContent: 'center', padding: 5 }}>
      <Svg width="32" height="26" viewBox="0 0 32 26" fill="none">
        {/* Mask for cutting out the dots when focused */}
        <Mask id="dotsMask" fill="white">
          <Path d="M25.3936 0C28.6124 0 31.2225 2.60931 31.2227 5.82812V14.7383C31.2227 17.9572 28.6125 20.5674 25.3936 20.5674H19.5918L16.876 25.2715C16.5307 25.8688 15.6684 25.8689 15.3232 25.2715L12.6074 20.5674H6.80469C3.58588 20.5672 0.976562 17.9571 0.976562 14.7383V5.82812C0.976714 2.60941 3.58597 0.000152403 6.80469 0H25.3936Z" fill="white"/>
          {focused && (
            <>
              <Circle cx="10.0511" cy="10.2835" r="1.81475" fill="black" />
              <Circle cx="16.0999" cy="10.2835" r="1.81475" fill="black" />
              <Circle cx="22.1487" cy="10.2835" r="1.81475" fill="black" />
            </>
          )}
        </Mask>
        
        {focused ? (
          // Focused state: filled with color, dots cut out
          <Path
            d="M25.3936 0C28.6124 0 31.2225 2.60931 31.2227 5.82812V14.7383C31.2227 17.9572 28.6125 20.5674 25.3936 20.5674H19.5918L16.876 25.2715C16.5307 25.8688 15.6684 25.8689 15.3232 25.2715L12.6074 20.5674H6.80469C3.58588 20.5672 0.976562 17.9571 0.976562 14.7383V5.82812C0.976714 2.60941 3.58597 0.000152403 6.80469 0H25.3936Z"
            fill={color}
            mask="url(#dotsMask)"
          />
        ) : (
          // Unfocused state: stroke only with grey dots
          <>
            <Mask id="path-1-inside-1_6234_17413" fill="white">
              <Path d="M25.3936 0C28.6124 0 31.2225 2.60931 31.2227 5.82812V14.7383C31.2227 17.9572 28.6125 20.5674 25.3936 20.5674H19.5918L16.876 25.2715C16.5307 25.8688 15.6684 25.8689 15.3232 25.2715L12.6074 20.5674H6.80469C3.58588 20.5672 0.976562 17.9571 0.976562 14.7383V5.82812C0.976714 2.60941 3.58597 0.000152403 6.80469 0H25.3936Z"/>
            </Mask>
            <Path
              d="M31.2227 5.82812H33.0227V5.82804L31.2227 5.82812ZM19.5918 20.5674V18.7674H18.5525L18.0329 19.6674L19.5918 20.5674ZM16.876 25.2715L18.4344 26.1723L18.4348 26.1715L16.876 25.2715ZM15.3232 25.2715L13.7644 26.1715L13.7646 26.1719L15.3232 25.2715ZM12.6074 20.5674L14.1663 19.6674L13.6467 18.7674H12.6074V20.5674ZM6.80469 20.5674L6.8046 22.3674H6.80469V20.5674ZM0.976562 5.82812L-0.823437 5.82804V5.82812H0.976562ZM6.80469 0V-1.8H6.8046L6.80469 0ZM25.3936 0V1.8C27.6186 1.8 29.4226 3.60375 29.4227 5.82821L31.2227 5.82812L33.0227 5.82804C33.0225 1.61488 29.6062 -1.8 25.3936 -1.8V0ZM31.2227 5.82812H29.4227V14.7383H31.2227H33.0227V5.82812H31.2227ZM31.2227 14.7383H29.4227C29.4227 16.9631 27.6184 18.7674 25.3936 18.7674V20.5674V22.3674C29.6066 22.3674 33.0227 18.9513 33.0227 14.7383H31.2227ZM25.3936 20.5674V18.7674H19.5918V20.5674V22.3674H25.3936V20.5674ZM19.5918 20.5674L18.0329 19.6674L15.3171 24.3715L16.876 25.2715L18.4348 26.1715L21.1507 21.4674L19.5918 20.5674ZM16.876 25.2715L15.3176 24.3707C15.665 23.7697 16.5337 23.7684 16.8819 24.3711L15.3232 25.2715L13.7646 26.1719C14.803 27.9695 17.3965 27.9679 18.4344 26.1723L16.876 25.2715ZM15.3232 25.2715L16.8821 24.3715L14.1663 19.6674L12.6074 20.5674L11.0486 21.4674L13.7644 26.1715L15.3232 25.2715ZM12.6074 20.5674V18.7674H6.80469V20.5674V22.3674H12.6074V20.5674ZM6.80469 20.5674L6.80477 18.7674C4.58032 18.7673 2.77656 16.9633 2.77656 14.7383H0.976562H-0.823437C-0.823437 18.9509 2.59144 22.3672 6.8046 22.3674L6.80469 20.5674ZM0.976562 14.7383H2.77656V5.82812H0.976562H-0.823437V14.7383H0.976562ZM0.976562 5.82812L2.77656 5.82821C2.77667 3.60354 4.5801 1.80011 6.80477 1.8L6.80469 0L6.8046 -1.8C2.59184 -1.7998 -0.823239 1.61528 -0.823437 5.82804L0.976562 5.82812ZM6.80469 0V1.8H25.3936V0V-1.8H6.80469V0Z"
              fill="#636363"
              mask="url(#path-1-inside-1_6234_17413)"
            />
            <Circle cx="10.0511" cy="10.2835" r="1.81475" fill="#636363" />
            <Circle cx="16.0999" cy="10.2835" r="1.81475" fill="#636363" />
            <Circle cx="22.1487" cy="10.2835" r="1.81475" fill="#636363" />
          </>
        )}
      </Svg>
    </View>
  );
}

